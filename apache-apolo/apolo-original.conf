<VirtualHost *:80>

    ServerName apolo.defesa.mil.br
    RedirectMatch ^/$ http://apolo.defesa.mil.br/SIGLMD-web
    DocumentRoot /var/www

    ProxyRequests Off
    ProxyPreserveHost On
    SSLProxyEngine On
    SSLProxyVerify none
    SSLProxyCheckPeerCN off
    SSLProxyCheckPeerName off
    SSLProxyCheckPeerExpire off

    NoProxy .mb siglmd.defesa.mil.br siglmd-geoserver.defesa.mil.br siglmd-app.defesa.mil.br osmope.defesa.mil.br apolo.defesa.mil.br

    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>

    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/

    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

    <Proxy *>
       Order deny,allow
       Allow from all
    </Proxy>

    # APOLO
    ProxyPass /SIGLMD-web http://10.5.115.193/SIGLMD-web
    ProxyPassReverse /SIGLMD-web http://10.5.115.193/SIGLMD-web

    # Servidor de Imagens
    ProxyPass /SvgService http://10.5.115.191:36319/SvgService
    ProxyPassReverse /SvgService http://10.5.115.191:36319/SvgService

    # GeoServer do OSM
    ProxyPass /osmope http://10.5.115.192/
    ProxyPassReverse /osmope http://10.5.115.192/

    ProxyPass /tile http://10.5.115.192/tile
    ProxyPassReverse /tile http://10.5.115.192/tile

    # GeoServer do MCLM
    ProxyPass /geoserver http://10.5.115.191:36212/geoserver
    ProxyPassReverse /geoserver http://10.5.115.191:36212/geoserver

    # MCLM
    ProxyPass /mclm http://10.5.115.191:36310/mclm
    ProxyPassReverse /mclm http://10.5.115.191:36310/mclm

    # Dashboard de Interoperabilidade - Frontend
    ProxyPass /interoperabilidade http://10.5.115.191:36313/interoperabilidade
    ProxyPassReverse /interoperabilidade http://10.5.115.191:36313/interoperabilidade
    ProxyPassReverseCookiePath /interoperabilidade/ /interoperabilidade

    # Dashboard de Interoperabilidade - Backend
    ProxyPass /interoperabilidade-backend http://10.5.115.191:36311/rod/interoperabilidade-apolo-rest
    ProxyPassReverse /interoperabilidade-backend http://10.5.115.191:36311/rod/interoperabilidade-apolo-rest
    ProxyPassReverseCookiePath /rod/ /interoperabilidade-backend
    ProxyPassReverseCookieDomain localhost apolo.defesa.mil.br

    # Buscador - APOLO
    ProxyPass /buscador http://10.5.115.191:36501/
    ProxyPassReverse /buscador http://10.5.115.191:36501/

    # Buscador - OSM
    ProxyPass /buscador-osm http://10.5.115.192:36502/
    ProxyPassReverse /buscador-osm http://10.5.115.192:36502/
   
    # Rotas (Graphhopper)
    Proxypass /rotas http://10.5.115.192:8989/route
    ProxypassReverse /rotas http://10.5.115.192:8989/route

    # Catalogo MB
    ProxyPass /catalogoMB-om https://catalogo2.dadm.mb:8443/novocat-rest/rest/oms/mb
    ProxyPassReverse /catalogoMB-om https://catalogo2.dadm.mb:8443/novocat-rest/rest/oms/mb

    # MCA - APOLO
    ProxyPass /mca http://10.5.115.191:36215
    ProxyPassReverse /mca http://10.5.115.191:36215

    # OM Service - APOLO
    ProxyPass /om-service http://10.5.115.191:36317/om-service
    ProxyPassReverse /om-service http://10.5.115.191:36317/om-service

    # Guardi√£o - APOLO
    ProxyPass /guardiao http://10.5.115.191:36202/guardiao
    ProxyPassReverse /guardiao	http://10.5.115.191:36202/guardiao

    # Correios
    ProxyPass /correios http://10.5.115.191:36320/
    ProxyPassReverse /correios  http://10.5.115.191:36320/


#    Proxypass /rotas http://10.5.115.122:8989/route
#    ProxypassReverse /rotas http://10.5.115.122:8989/route

</VirtualHost>
