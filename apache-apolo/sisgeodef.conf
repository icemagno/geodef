<VirtualHost *:80>

	ServerName sisgeodef.defesa.mil.br
	RedirectMatch ^/$ http://sisgeodef.defesa.mil.br/atlas
	DocumentRoot /var/www

	ProxyRequests Off
	ProxyPreserveHost On
	SSLProxyEngine On
	SSLProxyVerify none
	SSLProxyCheckPeerCN off
	SSLProxyCheckPeerName off
	SSLProxyCheckPeerExpire off

	NoProxy sisgeodef.defesa.mil.br apolo.defesa.mil.br

	<Directory />
        	Options FollowSymLinks
	        AllowOverride None
	</Directory>

	<Directory /var/www/>
        	Options Indexes FollowSymLinks MultiViews
	        AllowOverride None
	        Order allow,deny
	        allow from all
	</Directory>

	ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/

	<Directory "/usr/lib/cgi-bin">
        	AllowOverride None
	        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
	        Order allow,deny
	        Allow from all
	</Directory>

	<Proxy *>
	       Order deny,allow
	       Allow from all
	</Proxy>

	# SisGeoDef - Login
	ProxyPass /atlas http://atlas:36215/
	ProxyPassReverse /atlas http://atlas:36215/

	# Pleione
        ProxyPass /geoserver http://pleione:8080/geoserver/
        ProxyPassReverse /geoserver http://pleione:8080/geoserver/

	# Midas
        ProxyPass /midas http://midas:36203/
        ProxyPassReverse /midas http://midas:36203/


	














    # APOLO
    ProxyPass /SIGLMD-web http://10.5.115.193/SIGLMD-web
    ProxyPassReverse /SIGLMD-web http://10.5.115.193/SIGLMD-web

    # Servidor de Imagens
    ProxyPass /SvgService http://svgservice:8080/SvgService
    ProxyPassReverse /SvgService http://svgservice:8080/SvgService

    # GeoServer do OSM
    ProxyPass /osmope http://10.5.115.192/
    ProxyPassReverse /osmope http://10.5.115.192/

    ProxyPass /tile http://10.5.115.192/tile
    ProxyPassReverse /tile http://10.5.115.192/tile

    # GeoServer do MCLM
    ProxyPass /geoserver http://pleione:8080/geoserver
    ProxyPassReverse /geoserver http://pleione:8080/geoserver

    # MCLM
    ProxyPass /mclm http://mclm:8080/mclm
    ProxyPassReverse /mclm http://mclm:8080/mclm

    ProxyPass /mclm-guardiao http://mclm-guardiao:8080/mclm
    ProxyPassReverse /mclm-guardiao http://mclm-guardiao:8080/mclm

    # Dashboard de Interoperabilidade - Frontend
    ProxyPass /interoperabilidade http://interope-frontend:8080/interoperabilidade
    ProxyPassReverse /interoperabilidade http://interope-frontend:8080/interoperabilidade
    ProxyPassReverseCookiePath /interoperabilidade/ /interoperabilidade

    # Dashboard de Interoperabilidade - Backend
    ProxyPass /interoperabilidade-backend http://interope-backend:8080/rod/interoperabilidade-apolo-rest
    ProxyPassReverse /interoperabilidade-backend http://interope-backend:8080/rod/interoperabilidade-apolo-rest
    ProxyPassReverseCookiePath /rod/ /interoperabilidade-backend
    ProxyPassReverseCookieDomain localhost apolo.defesa.mil.br

    # Buscador - APOLO
    ProxyPass /buscador http://lucene:36510/
    ProxyPassReverse /buscador http://lucene:36510/

    # Buscador - OSM
    ProxyPass /buscador-osm http://10.5.115.192:36502/
    ProxyPassReverse /buscador-osm http://10.5.115.192:36502/
   
    # Rotas (Graphhopper)
    Proxypass /rotas http://10.5.115.192:8989/route
    ProxypassReverse /rotas http://10.5.115.192:8989/route

    # Catalogo MB
    ProxyPass /catalogoMB-om https://catalogo2.dadm.mb:8443/novocat-rest/rest/oms/mb
    ProxyPassReverse /catalogoMB-om https://catalogo2.dadm.mb:8443/novocat-rest/rest/oms/mb

    # MCA - APOLO
    ProxyPass /mca http://mca-ui/
    ProxyPassReverse /mca http://mca-ui/

    ProxyPass /mca-resource http://mca-resource:8080/mca-resource
    ProxyPassReverse /mca-resource mca-resource:8080/mca-resource

    # OM Service - APOLO
    ProxyPass /om-service http://om-service:8080/om-service
    ProxyPassReverse /om-service http://om-service:8080/om-service

    # Guardi√£o - APOLO
    ProxyPass /guardiao http://guardiao:8080/guardiao
    ProxyPassReverse /guardiao	http://guardiao:8080/guardiao

    # Home Novo APOLO
    ProxyPass /home-apolo   http://home-apolo/
    ProxyPassReverse /home-apolo	http://home-apolo/

    # Correios
    ProxyPass /correios http://correios:8080/
    ProxyPassReverse /correios  http://correios:8080/

    # Forecast Service
    ProxyPass /forecast http://forecast:5000/forecast
    ProxyPassReverse /forecast  http://forecast:5000/forecast

    # Logistica Operacional
    ProxyPass /logistica-operacional http://logistica-operacional:8080/
    ProxyPassReverse /logistica-operacional http://logistica-operacional:8080/

#    Proxypass /rotas http://10.5.115.122:8989/route
#    ProxypassReverse /rotas http://10.5.115.122:8989/route

</VirtualHost>
