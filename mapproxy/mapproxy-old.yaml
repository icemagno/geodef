# -------------------------------
# MapProxy example configuration.
# -------------------------------
#
# This is a minimal MapProxy configuration.
# See full_example.yaml and the documentation for more options.
#

# Starts the following services:
# Demo:
#     http://localhost:8080/demo
# WMS:
#     capabilities: http://localhost:8080/service?REQUEST=GetCapabilities
# WMTS:
#     capabilities: http://localhost:8080/wmts/1.0.0/WMTSCapabilities.xml
#     first tile: http://localhost:8080/wmts/osm/webmercator/0/0/0.png
# Tile service (compatible with OSM/etc.)
#     first tile: http://localhost:8080/tiles/osm/webmercator/0/0/0.png
# TMS:
#     note: TMS is not compatible with OSM/Google Maps/etc.
#     fist tile: http://localhost:8080/tms/1.0.0/osm/webmercator/0/0/0.png
# KML:
#     initial doc: http://localhost:8080/kml/osm/webmercator

services:
  demo:
#  tms:
#    use_grid_names: true
    # origin for /tiles service
#    origin: 'nw'
#  kml:
#      use_grid_names: true
# wmts:
  wms:
    srs: ['EPSG:4326']
    md:
      title: MapProxy WMS Proxy
      abstract: SISGIDE.
    attribution:
      text: 'SisGeoDef'      

layers:
  - name: bdgex
    title: Camada Cartas - BDGEX
    sources: [bdgexcartas_cache]
  - name: rapideye
    title: Camada RapidEye - BDGEX
    sources: [rapideye_cache]
  - name: worldhillshades
    title: ArcGIS World Hillshades
    sources: [world_hillshades_cache]
  - name: seamarks
    title: OpenSeaMap Seamarks
    sources: [osm_seamaps_cache]
  - name: carta22900
    title: Carta Nautica 22900
    sources: [carta_22900_cache]
  - name: carta1501
    title: Carta Nautica 1501
    sources: [carta_1501_cache]
  - name: carta1550
    title: Carta Nautica 1550
    sources: [carta_1550_cache]
  - name: carta23000
    title: Carta Nautica 23000
    sources: [carta_23000_cache]
  - name: carta23100
    title: Carta Nautica 23100
    sources: [carta_23100_cache]
  - name: apolomma
    title: MMA - Unidades de Conservação Nacional
    sources: [apolo_mma_cache]
  - name: sisclaten01
    title: SISCLATEN - Projetos Encerrados
    sources: [sisclaten_01_cache]
  - name: apolodnit
    title: Pontes DNIT
    sources: [apolo_dnit_cache]
  - name: apololinhas
    title: Linhas de Transmissão
    sources: [apolo_linhas_cache]
  - name: apolousinas
    title: Usinas Energia Eletrica
    sources: [apolo_usinas_cache]
  - name: amazoniaazul
    title: Amazônia Azul
    sources: [apolo_amazonia_cache]
  - name: apoloorgmil
    title: Organizações Militares
    sources: [apolo_orgmil_cache]
  - name: icamacae
    title: Cartas de Área Macaé
    sources: [ica_macae_cache]
  - name: icabh
    title: Cartas Visuais WAC BH
    sources: [ica_bh_cache]
  - name: ical2
    title: Cartas de Rotas L2
    sources: [ica_l2_cache]
  - name: icah2
    title: Cartas de Rotas H2
    sources: [ica_h2_cache]
  - name: corrente
    title: Corrente
    sources: [corrente_cache]
    dimensions:
      time:
        values:
          - "2019-10-25T12:00:00.000Z"
          - "2019-10-25T15:00:00.000Z"
          - "2019-10-25T18:00:00.000Z"
          - "2019-10-25T21:00:00.000Z"
          - "2019-10-26T00:00:00.000Z"
        default: "2019-11-01T09:00:00.000Z"  
      elevation:
        values:
          - -0.0
          - -2.0
          - -4.0
          - -6.0
          - -8.0
          - -10.0
          - -12.0
          - -15.0
          - -20.0
          - -25.0
          - -30.0
          - -35.0
        default: -0.0
    
caches:
  world_hillshades_cache:
    grids: [geodetic]
    sources: [temp_cache_worldhillshades]
    transparent: false
    request_format: image/png
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
  osm_seamaps_cache:
    grids: [geodetic]
    sources: [temp_cache_seamarks]
    transparent: true
    request_format: image/png
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
  rapideye_cache:
    grids: [geodetic]
    sources: [rapideye_wms]
    link_single_color_images: true
    format: image/jpeg
  bdgexcartas_cache:
    grids: [geodetic]
    concurrent_tile_creators: 4
    link_single_color_images: true
    sources: [bdgexcartas_wms]
    format: image/png
    transparent: true
  carta_22900_cache:
    grids: [geodetic]
    sources: [carta_22900_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  carta_1501_cache:
    grids: [geodetic]
    sources: [carta_1501_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  carta_1550_cache:
    grids: [geodetic]
    sources: [carta_1550_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  carta_23000_cache:
    grids: [geodetic]
    sources: [carta_23000_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  carta_23100_cache:
    grids: [geodetic]
    sources: [carta_23100_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  temp_cache_worldhillshades:
    sources: [world_hillshades]
    disable_storage: true
    grids: [geodetic]
    transparent: false
    request_format: image/png
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format    
  temp_cache_seamarks:
    sources: [osm_seamarks]
    disable_storage: true
    grids: [GLOBAL_WEBMERCATOR]
    transparent: true
    request_format: image/png
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
  apolo_mma_cache:
    grids: [geodetic]
    sources: [apolo_mma_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  sisclaten_01_cache:
    grids: [geodetic]
    sources: [sisclaten_01_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  apolo_dnit_cache:
    grids: [geodetic]
    sources: [apolo_dnit_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  apolo_linhas_cache:
    grids: [geodetic]
    sources: [apolo_linhas_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  apolo_usinas_cache:
    grids: [geodetic]
    sources: [apolo_usinas_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  apolo_amazonia_cache:
    grids: [geodetic]
    sources: [apolo_amazonia_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  apolo_orgmil_cache:
    grids: [geodetic]
    sources: [apolo_orgmil_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  ica_macae_cache:
    grids: [geodetic]
    sources: [ica_macae_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  ica_bh_cache:
    grids: [geodetic]
    sources: [ica_bh_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  ica_l2_cache:
    grids: [geodetic]
    sources: [ica_l2_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  ica_h2_cache:
    grids: [geodetic]
    sources: [ica_h2_wms]
    link_single_color_images: true
    concurrent_tile_creators: 4
    format: custom_format
    transparent: true
    request_format: image/png
  corrente_cache:
    grids: [geodetic]
    sources: [corrente_wms]
    disable_storage: true
    concurrent_tile_creators: 15
    transparent: true
    
sources:
  carta_22900_wms:
    type: wms
    req:
      url: http://172.21.81.43/osmope/cartasnauticas/wms/
      layers: cartasnauticas:cs_cs_22900
      transparent: true
  ica_macae_wms:
    type: wms
    req:
      url: http://www.aisweb.aer.mil.br/geoserver/wms/
      layers: ICA:MACAE_ARC
      transparent: true
  ica_bh_wms:
    type: wms
    req:
      url: http://www.aisweb.aer.mil.br/geoserver/wms/
      layers: ICA:WAC_3189_BELO_HORIZONTE
      transparent: true
  ica_l2_wms:
    type: wms
    req:
      url: http://www.aisweb.aer.mil.br/geoserver/wms/
      layers: ICA:ENRC_L2
      transparent: true
  ica_h2_wms:
    type: wms
    req:
      url: http://www.aisweb.aer.mil.br/geoserver/wms/
      layers: ICA:ENRC_H2
      transparent: true
  carta_23000_wms:
    type: wms
    req:
      url: http://172.21.81.43/osmope/cartasnauticas/wms/
      layers: cartasnauticas:cs_cs_23000
      transparent: true
  carta_23100_wms:
    type: wms
    req:
      url: http://172.21.81.43/osmope/cartasnauticas/wms/
      layers: cartasnauticas:cs_cs_23100
      transparent: true
  carta_1501_wms:
    type: wms
    req:
      url: http://172.21.81.43/osmope/cartasnauticas/wms/
      layers: cartasnauticas:cs_cs_1501
      transparent: true
  carta_1550_wms:
    type: wms
    req:
      url: http://172.21.81.43/osmope/cartasnauticas/wms/
      layers: cartasnauticas:cs_cs_1550
      transparent: true
  rapideye_wms:
    type: wms
    req:
      url: http://bdgex.eb.mil.br/mapcache/
      layers: rapideye
  bdgexcartas_wms:
    type: wms
    req:
      url: http://bdgex.eb.mil.br/mapcache/
      layers: ctm250,ctm100,ctm50,ctm25,Multiescala_LocalidadesLimites
  osm_seamarks:
    type: tile
    grid: GLOBAL_WEBMERCATOR
    url: http://t1.openseamap.org/seamark/%(z)s/%(x)s/%(y)s.png
    transparent: true
    request_format: image/png
    concurrent_requests: 5
    http:
      client_timeout: 600 # seconds
  world_hillshades:
    type: tile
    grid: geodetic
    url: https://services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/%(z)s/%(x)s/%(y)s.png
    transparent: false
    request_format: image/png
    concurrent_requests: 5
    http:
      client_timeout: 600 # seconds
  apolo_mma_wms:
    type: wms
    req:
      url: http://10.5.115.135:8080/geoservermclm/sinamob/wms/
      layers: view_mma_cnuc_esfera_e_grupo_manejo
      transparent: true
  sisclaten_01_wms:
    type: wms
    req:
      url: http://10.5.115.135:8080/geoservermclm/sinamob/wms/
      layers: view_sisclaten_projetos_encerrados
      transparent: true
  apolo_dnit_wms:
    type: wms
    req:
      url: http://10.5.115.135:8080/geoservermclm/apolo/wms/
      layers: view_dnit_obras_de_arte
      transparent: true
  apolo_linhas_wms:
    type: wms
    req:
      url: http://10.5.115.135:8080/geoservermclm/apolo/wms/
      layers: view_aneel_ons_linhas_transmissao
      transparent: true
  apolo_usinas_wms:
    type: wms
    req:
      url: http://10.5.115.135:8080/geoservermclm/apolo/wms/
      layers: aneel_usinas_energia
      transparent: true
  apolo_amazonia_wms:
    type: wms
    req:
      url: http://10.5.115.135:8080/geoservermclm/apolo/wms/
      layers: apolo:amazonia_azul
      transparent: true
  apolo_orgmil_wms:
    type: wms
    req:
      url: http://10.5.115.135:8080/geoservermclm/apolo/wms/
      layers: view_org_mil_hom
      transparent: true
  corrente_wms:
    type: wms
    req:
      url: https://wms.hycom.org/thredds/wms/GLBy0.08/latest?styles=linevec/rainbow&COLORSCALERANGE=0.004%2C0.8193&NUMCOLORBANDS=253&
      layers: sea_water_velocity
      transparent: true
      styles: linevec/rainbow
    forward_req_params: ['time', 'elevation']  

      
grids:
  webmercator:
    base: GLOBAL_WEBMERCATOR
  geodetic:
    base: GLOBAL_GEODETIC


  # image/transformation options
  image:
    # use best resampling for vector data
    resampling_method: bicubic # nearest/bilinear
    # stretch cached images by this factor before
    # using the next level
    stretch_factor: 1.15
    # shrink cached images up to this factor before
    # returning an empty image (for the first level)
    max_shrink_factor: 4.0

    # Enable 24bit PNG images. Defaults to true (8bit PNG)
    paletted: false
    formats:
      custom_format:
        format: image/png
        # the custom format will be stored as 8bit PNG
        mode: P
        colors: 32
        transparent: true
        encoding_options:
        # The algorithm used to quantize (reduce) the image colors
          quantizer: fastoctree
      # edit an existing format
      image/jpeg:
        encoding_options:
          # jpeg quality [0-100]
          jpeg_quality: 60


globals:
